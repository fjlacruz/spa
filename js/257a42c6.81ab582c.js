(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["257a42c6"],{"51be":function(t,i,e){"use strict";i["a"]={endpoint:"http://localhost"}},f05c:function(t,i,e){"use strict";e.r(i);var o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("div",{staticClass:"q-pa-xs"}),e("div",{staticClass:"row justify-center"},[e("div",{staticClass:"col-12 col-md-10 q-pa-xs"},[e("q-card",{staticClass:"my-card"},[e("q-card-section",[t._v("Asignar Usuario a Servidor")]),e("q-form",{attrs:{id:"registrarAsignacion"},on:{submit:function(i){return i.preventDefault(),t.validarExisteUsuario(i)}}},[e("q-separator",{attrs:{inset:""}}),e("q-card-section",[e("div",{staticClass:"row justify-center"},[e("div",{staticClass:"col-6 col-xs-6 q-pa-xs"},[e("q-input",{attrs:{name:"nombre_servidor",id:"nombre_servidor",filled:"",hint:"Nombre del Servidor",dense:"dense",value:t.formEditar.nombre_servidor,"lazy-rules":"",rules:[function(t){return t&&t.length>0||"Campo Obligatorio"}]},model:{value:t.formEditar.nombre_servidor,callback:function(i){t.$set(t.formEditar,"nombre_servidor",i)},expression:"formEditar.nombre_servidor"}})],1),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formEditar.sf,expression:"formEditar.sf"}],attrs:{type:"hidden"},domProps:{value:t.formEditar.sf},on:{input:function(i){i.target.composing||t.$set(t.formEditar,"sf",i.target.value)}}}),e("div",{staticClass:"col-6 col-xs-6 q-pa-xs"},[e("q-input",{attrs:{name:"ip_servidor",id:"ip_servidor",filled:"",hint:"IP del Servidor",dense:"dense",value:t.formEditar.ip_servidor,"lazy-rules":"",rules:[function(t){return t&&t.length>0||"Campo Obligatorio"}]},model:{value:t.formEditar.ip_servidor,callback:function(i){t.$set(t.formEditar,"ip_servidor",i)},expression:"formEditar.ip_servidor"}})],1)]),e("div",{staticClass:"col-12 col-xs-12 q-pa-xs"},[e("q-select",{attrs:{filled:"",options:t.listar,"option-value":"id_usuario","option-label":"usuario",name:"model",id:"model","emit-value":"","map-options":"",dense:"dense",hint:"Software",rules:[function(t){return t&&t.length>0||"Campo Obligatorio"}]},model:{value:t.model,callback:function(i){t.model=i},expression:"model"}}),e("input",{attrs:{type:"hidden",name:"id_usuario",id:"id_usuario"},domProps:{value:t.model}}),e("input",{attrs:{type:"hidden",name:"id_servidor",id:"id_servidor"},domProps:{value:t.$route.params.id_servidor}})],1),t._v(" \n            "),e("q-separator",{attrs:{inset:""}}),t._v(" \n            "),e("div",{staticClass:"col-6 col-xs-6 q-pa-xs"},[e("q-btn",{attrs:{"icon-right":"send",label:"Asignar",type:"submit",color:"primary"}}),t._v(" \n              "),e("q-btn",{attrs:{"icon-right":"cancel",label:"Cancelar",type:"submit",color:"orange",to:"/servidores"}})],1)],1)],1)],1)],1)]),e("div",{staticClass:"row justify-center"},[e("div",{staticClass:"col-12 col-md-10 q-pa-xs"},[e("q-card",{staticClass:"my-card"},[e("q-card-section",[t._v("Usuario Asignado al Servidor")]),e("q-separator",{attrs:{inset:""}}),""!=t.verificacion?e("q-card-section",[e("table",{staticClass:"q-table"},[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v("usuario")]),e("th",{staticClass:"text-left"},[t._v("Borrar")])])]),t._l(t.listarSoft,(function(i){return e("tbody",{key:i.id_servidor},[e("tr",[e("td",{staticClass:"text-left"},[t._v(t._s(i.nombres)+" "+t._s(i.apellidos))]),e("td",{staticClass:"text-left"},[e("q-btn",{attrs:{round:"",color:"red",icon:"cancel",size:"xs",href:"#"},on:{click:function(e){return t.eliminar(i.id_asignacion_equipo)}}}),e("q-tooltip",[t._v("Borrar")])],1)])])}))],2)]):e("q-card-section",[t._v("No Posee Usuario Asignado")])],1)],1)])])},r=[],a=e("c47a"),s=e.n(a),n=e("f312"),d=e("bc3a"),c=e.n(d),l=e("51be"),u=(e("bd4c"),{name:"editar",data:function(){var t;return t={formEditar:{},listar:[],listarSoft:[],id_usuario:"",model:"",estatus:"",sf:"",verificacion:""},s()(t,"id_usuario",""),s()(t,"id_servidor",""),t},methods:{getId:function(){var t=this,i=this.$route.params.id_servidor;c.a.get("".concat(l["a"].endpoint,"/api_inventarioit/mantenedores/getServidor?id_servidor=")+i).then((function(i){t.formEditar=i.data.response[0]}))},getSoftwareServidor:function(){var t=this,i=this.$route.params.id_servidor;c.a.get("".concat(l["a"].endpoint,"/api_inventarioit/mantenedores/verificarAsignacionUsuario?id_servidor=")+i).then((function(i){t.listarSoft=i.data.response,t.verificacion=i.data.response,console.log(t.listarSoft)}))},registrar:function(){var t=this;if("Seleccione"==this.model)this.$q.notify({message:"Seleccione un tipo de sotware",color:"red-5",icon:"warning",position:"bottom-right"});else{var i=document.getElementById("registrarAsignacion");c.a.post("".concat(l["a"].endpoint,"/api_inventarioit/mantenedores/registrarAsignacion"),new FormData(i)).then((function(i){t.respuesta=i.data.response,"success"==t.respuesta?(t.$q.notify({message:"Usuario Asignado",color:"teal-6",icon:"warning",position:"bottom-right"}),t.getSoftwareServidor()):t.$q.notify({message:"Error en le registro",color:"red-5",icon:"warning",position:"bottom-right"})}))}},eliminar:function(t){var i=this;c.a.post("".concat(l["a"].endpoint,"/api_inventarioit/mantenedores/eliminarAsignacionusuario?id_asignacion_equipo=")+t).then((function(t){i.$q.notify({message:"Asignacion Eliminada",color:"red-5",icon:"warning",position:"bottom-right"}),i.getSoftwareServidor()}))},userList:function(){var t=this;c.a.get("".concat(l["a"].endpoint,"/api_inventarioit/usuarios/getUsersList")).then((function(i){t.listar=i.data.response,t.model="Seleccione"}))},validarExisteUsuario:function(){var t=this,i=new FormData;i.append("model",this.model),i.append("id_servidor",this.$route.params.id_servidor),c.a.post("".concat(l["a"].endpoint,"/api_inventarioit/mantenedores/validarAsignacionUsuario"),i).then((function(i){t.respuesta=i.data.response,console.log(t.respuesta),"success"===i.data.response?(t.$q.notify({message:"Software ya Asignado...!!!",color:"red-5",icon:"warning",position:"bottom-right"}),t.model=""):t.registrar()}))}},created:function(){this.getId(),this.userList(),this.getSoftwareServidor()},mixins:[n["a"]]}),p=u,m=e("2877"),v=e("eebe"),f=e.n(v),g=e("f09f"),_=e("a370"),h=e("0378"),b=e("eb85"),q=e("27f9"),S=e("ddd8"),w=e("9c40"),x=e("eaac"),C=e("05c0"),y=Object(m["a"])(p,o,r,!1,null,null,null);i["default"]=y.exports;f()(y,"components",{QCard:g["a"],QCardSection:_["a"],QForm:h["a"],QSeparator:b["a"],QInput:q["a"],QSelect:S["a"],QBtn:w["a"],QTable:x["a"],QTooltip:C["a"]})},f312:function(t,i,e){"use strict";i["a"]={created:function(){var t=JSON.parse(this.$q.localStorage.getItem("token"));t||(this.$router.push("/"),this.$q.notify({message:"Estimado Usuario NO se encuentra logueado....!!!",color:"red-5",textColor:"white",icon:"warning",position:"bottom-right"}))}}}}]);